{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./TransactionsTable.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TransactionsTable=_ref=>{let{apiBaseUrl,selectedMonth}=_ref;const[transactions,setTransactions]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[searchText,setSearchText]=useState('');const[pagination,setPagination]=useState({page:1,perPage:10,total:0,totalPages:0});useEffect(()=>{fetchTransactions();// eslint-disable-next-line\n},[selectedMonth,pagination.page,searchText]);const fetchTransactions=async()=>{try{setLoading(true);const response=await axios.get(`${apiBaseUrl}/transactions`,{params:{month:selectedMonth,search:searchText,page:pagination.page,perPage:pagination.perPage}});setTransactions(response.data.transactions);setPagination(prev=>({...prev,total:response.data.pagination.total,totalPages:response.data.pagination.totalPages}));}catch(err){console.error('Error fetching transactions:',err);setError('Failed to fetch transactions');}finally{setLoading(false);}};const handleSearchChange=e=>{setSearchText(e.target.value);setPagination(prev=>({...prev,page:1}));// Reset to first page on new search\n};const clearSearch=()=>{setSearchText('');setPagination(prev=>({...prev,page:1}));};const handleNextPage=()=>{if(pagination.page<pagination.totalPages){setPagination(prev=>({...prev,page:prev.page+1}));}};const handlePrevPage=()=>{if(pagination.page>1){setPagination(prev=>({...prev,page:prev.page-1}));}};const formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleDateString();};return/*#__PURE__*/_jsxs(\"div\",{className:\"transactions-table-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Transactions Table\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-controls\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search transaction\",value:searchText,onChange:handleSearchChange}),searchText&&/*#__PURE__*/_jsx(\"button\",{onClick:clearSearch,className:\"clear-search\",children:\"\\xD7\"})]})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading transactions...\"}):error?/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"transactions-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Sold\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.length>0?transactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:transaction.id}),/*#__PURE__*/_jsx(\"td\",{children:transaction.title}),/*#__PURE__*/_jsxs(\"td\",{className:\"description-cell\",children:[transaction.description.substring(0,50),\"...\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",transaction.price.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:transaction.category}),/*#__PURE__*/_jsx(\"td\",{children:transaction.sold?'Yes':'No'}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(transaction.dateOfSale)})]},transaction.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"no-data\",children:\"No transactions found\"})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-controls\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Page No: \",pagination.page,\" / \",pagination.totalPages]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevPage,disabled:pagination.page<=1,children:\"Previous\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextPage,disabled:pagination.page>=pagination.totalPages,children:\"Next\"})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Per Page: \",pagination.perPage]})]})]})]});};export default TransactionsTable;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TransactionsTable","_ref","apiBaseUrl","selectedMonth","transactions","setTransactions","loading","setLoading","error","setError","searchText","setSearchText","pagination","setPagination","page","perPage","total","totalPages","fetchTransactions","response","get","params","month","search","data","prev","err","console","handleSearchChange","e","target","value","clearSearch","handleNextPage","handlePrevPage","formatDate","dateString","date","Date","toLocaleDateString","className","children","type","placeholder","onChange","onClick","length","map","transaction","id","title","description","substring","price","toFixed","category","sold","dateOfSale","colSpan","disabled"],"sources":["E:/Roxiler/mern-transaction-dashboard/frontend/src/components/TransactionsTable/TransactionsTable.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './TransactionsTable.css';\r\n\r\nconst TransactionsTable = ({ apiBaseUrl, selectedMonth }) => {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [pagination, setPagination] = useState({\r\n    page: 1,\r\n    perPage: 10,\r\n    total: 0,\r\n    totalPages: 0\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchTransactions();\r\n    // eslint-disable-next-line\r\n  }, [selectedMonth, pagination.page, searchText]);\r\n\r\n  const fetchTransactions = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get(`${apiBaseUrl}/transactions`, {\r\n        params: {\r\n          month: selectedMonth,\r\n          search: searchText,\r\n          page: pagination.page,\r\n          perPage: pagination.perPage\r\n        }\r\n      });\r\n      \r\n      setTransactions(response.data.transactions);\r\n      setPagination(prev => ({\r\n        ...prev,\r\n        total: response.data.pagination.total,\r\n        totalPages: response.data.pagination.totalPages\r\n      }));\r\n    } catch (err) {\r\n      console.error('Error fetching transactions:', err);\r\n      setError('Failed to fetch transactions');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearchChange = (e) => {\r\n    setSearchText(e.target.value);\r\n    setPagination(prev => ({ ...prev, page: 1 })); // Reset to first page on new search\r\n  };\r\n\r\n  const clearSearch = () => {\r\n    setSearchText('');\r\n    setPagination(prev => ({ ...prev, page: 1 }));\r\n  };\r\n\r\n  const handleNextPage = () => {\r\n    if (pagination.page < pagination.totalPages) {\r\n      setPagination(prev => ({ ...prev, page: prev.page + 1 }));\r\n    }\r\n  };\r\n\r\n  const handlePrevPage = () => {\r\n    if (pagination.page > 1) {\r\n      setPagination(prev => ({ ...prev, page: prev.page - 1 }));\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  return (\r\n    <div className=\"transactions-table-container\">\r\n      <h2>Transactions Table</h2>\r\n      \r\n      <div className=\"table-controls\">\r\n        <div className=\"search-box\">\r\n          <input \r\n            type=\"text\" \r\n            placeholder=\"Search transaction\" \r\n            value={searchText}\r\n            onChange={handleSearchChange}\r\n          />\r\n          {searchText && (\r\n            <button onClick={clearSearch} className=\"clear-search\">Ã—</button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {loading ? (\r\n        <div className=\"loading\">Loading transactions...</div>\r\n      ) : error ? (\r\n        <div className=\"error\">{error}</div>\r\n      ) : (\r\n        <>\r\n          <div className=\"table-responsive\">\r\n            <table className=\"transactions-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>Title</th>\r\n                  <th>Description</th>\r\n                  <th>Price</th>\r\n                  <th>Category</th>\r\n                  <th>Sold</th>\r\n                  <th>Date</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {transactions.length > 0 ? (\r\n                  transactions.map(transaction => (\r\n                    <tr key={transaction.id}>\r\n                      <td>{transaction.id}</td>\r\n                      <td>{transaction.title}</td>\r\n                      <td className=\"description-cell\">{transaction.description.substring(0, 50)}...</td>\r\n                      <td>${transaction.price.toFixed(2)}</td>\r\n                      <td>{transaction.category}</td>\r\n                      <td>{transaction.sold ? 'Yes' : 'No'}</td>\r\n                      <td>{formatDate(transaction.dateOfSale)}</td>\r\n                    </tr>\r\n                  ))\r\n                ) : (\r\n                  <tr>\r\n                    <td colSpan=\"7\" className=\"no-data\">No transactions found</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          \r\n          <div className=\"pagination-controls\">\r\n            <span>Page No: {pagination.page} / {pagination.totalPages}</span>\r\n            <div className=\"pagination-buttons\">\r\n              <button \r\n                onClick={handlePrevPage} \r\n                disabled={pagination.page <= 1}\r\n              >\r\n                Previous\r\n              </button>\r\n              <button \r\n                onClick={handleNextPage} \r\n                disabled={pagination.page >= pagination.totalPages}\r\n              >\r\n                Next\r\n              </button>\r\n            </div>\r\n            <span>Per Page: {pagination.perPage}</span>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionsTable;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}